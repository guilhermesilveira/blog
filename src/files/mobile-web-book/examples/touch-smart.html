<!doctype html>
<html lang="pt-br">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="../../livro-web-mobile/exemplos/exemplos.css">
	<link rel="stylesheet" href="switch.css">
	
	<title>Touch events</title>
</head>
<body>
	
	<h1>smart touch</h1>
	<div class="switch smart-touch">
		<div class="switch-container">
			<span class="switch-control"></span>
			<span class="switch-on">ON</span>
			<span class="switch-off">OFF</span>
		</div>
	</div>

	<p id="log"></p>
	<div id="qrcode"></div>
	
	<hr>
	<div class="footer">
		Example from the book <a href="../">The Mobile Web</a>. See this example's <a href="https://github.com/sergiolopes/blog/blob/master/src/files/mobile-web-book/examples/" id="link-source">source code</a>.
	</div>
	
	<script src="script.js"></script>
	<script>
	// implementação do smart touch
	(function(){
		var startTimestamp;

		$('.switch.smart-touch').on('touchstart', function(e){
			startTimestamp = new Date().getTime();
			log('Event: ' + event.type + ' (smart) (#'+e.touches[0].identifier+')');
		});

		$('.switch.smart-touch').on('touchend', function(e){
			var now = new Date().getTime();
			log('Event: '+event.type+' (smart) '+ (now-startTimestamp) +'ms (#'+e.changedTouches[0].identifier+')');

			if (now <= startTimestamp + 150) {
				event.currentTarget.classList.toggle('active');
				log('Activate (smart)');
			} else {
				log('Discarded (smart)');
			}
		});		

	})();
	</script>
</body>
</html>